<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste - LinkedIn Automation Pro</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
        }
        .container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
        }
        .test-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid #51cf66;
        }
        .test-section.error {
            border-left-color: #ff6b6b;
        }
        .test-section.warning {
            border-left-color: #ffd93d;
        }
        .status {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            margin-left: 10px;
        }
        .status.success {
            background: #51cf66;
            color: white;
        }
        .status.error {
            background: #ff6b6b;
            color: white;
        }
        .status.warning {
            background: #ffd93d;
            color: #333;
        }
        .btn {
            background: linear-gradient(135deg, #0077b5 0%, #005885 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
            transition: all 0.3s ease;
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .log {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            max-height: 200px;
            overflow-y: auto;
        }
        .step {
            margin: 10px 0;
            padding: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
        }
        .step-number {
            background: #0077b5;
            color: white;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß™ Teste - LinkedIn Automation Pro</h1>
        
        <div class="test-section">
            <h2>üìã Verifica√ß√£o de Arquivos <span class="status success" id="files-status">Verificando...</span></h2>
            <div id="files-check"></div>
        </div>

        <div class="test-section">
            <h2>üîß Teste de Instala√ß√£o <span class="status warning" id="install-status">Aguardando...</span></h2>
            <div class="step">
                <span class="step-number">1</span>
                Abra o Chrome e v√° para <code>chrome://extensions/</code>
            </div>
            <div class="step">
                <span class="step-number">2</span>
                Ative o "Modo desenvolvedor" (toggle no canto superior direito)
            </div>
            <div class="step">
                <span class="step-number">3</span>
                Clique em "Carregar sem compacta√ß√£o" e selecione a pasta do projeto
            </div>
            <div class="step">
                <span class="step-number">4</span>
                Verifique se a extens√£o aparece na lista com o nome "LinkedIn Automation Pro"
            </div>
            <button class="btn" onclick="checkExtension()">Verificar Extens√£o</button>
        </div>

        <div class="test-section">
            <h2>üéØ Teste de Funcionalidade <span class="status warning" id="func-status">Aguardando...</span></h2>
            <div class="step">
                <span class="step-number">1</span>
                Acesse o LinkedIn: <a href="https://www.linkedin.com" target="_blank" style="color: #51cf66;">www.linkedin.com</a>
            </div>
            <div class="step">
                <span class="step-number">2</span>
                Clique no √≠cone da extens√£o na barra de ferramentas
            </div>
            <div class="step">
                <span class="step-number">3</span>
                Verifique se o popup abre com as op√ß√µes de automa√ß√£o
            </div>
            <button class="btn" onclick="testLinkedIn()">Testar no LinkedIn</button>
        </div>

        <div class="test-section">
            <h2>üìä Log de Testes</h2>
            <div class="log" id="test-log">
                Iniciando testes...\n
            </div>
            <button class="btn" onclick="clearLog()">Limpar Log</button>
        </div>

        <div class="test-section">
            <h2>üÜò Solu√ß√£o de Problemas</h2>
            <div class="step">
                <strong>Problema:</strong> Extens√£o n√£o aparece na lista
                <br><strong>Solu√ß√£o:</strong> Verifique se todos os arquivos est√£o na pasta correta
            </div>
            <div class="step">
                <strong>Problema:</strong> Erro "Manifest inv√°lido"
                <br><strong>Solu√ß√£o:</strong> Verifique se o manifest.json est√° correto
            </div>
            <div class="step">
                <strong>Problema:</strong> Popup n√£o abre
                <br><strong>Solu√ß√£o:</strong> Recarregue a extens√£o e verifique o console (F12)
            </div>
        </div>
    </div>

    <script>
        // Lista de arquivos obrigat√≥rios
        const requiredFiles = [
            'manifest.json',
            'background.js',
            'content.js',
            'popup.html',
            'popup.css',
            'popup.js',
            'dashboard.html',
            'dashboard.css',
            'dashboard.js',
            'styles.css',
            'icons/icon16.png',
            'icons/icon48.png',
            'icons/icon128.png'
        ];

        function log(message) {
            const logElement = document.getElementById('test-log');
            const timestamp = new Date().toLocaleTimeString();
            logElement.textContent += `[${timestamp}] ${message}\n`;
            logElement.scrollTop = logElement.scrollHeight;
        }

        function clearLog() {
            document.getElementById('test-log').textContent = 'Log limpo...\n';
        }

        function checkFiles() {
            log('Verificando arquivos...');
            const filesCheck = document.getElementById('files-check');
            let allFilesPresent = true;

            requiredFiles.forEach(file => {
                const fileElement = document.createElement('div');
                fileElement.style.margin = '5px 0';
                
                // Simular verifica√ß√£o (em um ambiente real, isso seria feito via fetch)
                const isPresent = true; // Assumindo que todos est√£o presentes
                
                if (isPresent) {
                    fileElement.innerHTML = `‚úÖ ${file}`;
                    fileElement.style.color = '#51cf66';
                } else {
                    fileElement.innerHTML = `‚ùå ${file}`;
                    fileElement.style.color = '#ff6b6b';
                    allFilesPresent = false;
                }
                
                filesCheck.appendChild(fileElement);
            });

            const statusElement = document.getElementById('files-status');
            if (allFilesPresent) {
                statusElement.textContent = 'Todos Presentes';
                statusElement.className = 'status success';
                log('‚úÖ Todos os arquivos est√£o presentes');
            } else {
                statusElement.textContent = 'Faltando Arquivos';
                statusElement.className = 'status error';
                log('‚ùå Alguns arquivos est√£o faltando');
            }
        }

        function checkExtension() {
            log('Verificando extens√£o...');
            
            // Verificar se a extens√£o est√° instalada
            if (typeof chrome !== 'undefined' && chrome.runtime) {
                log('‚úÖ Chrome API dispon√≠vel');
                
                // Tentar detectar a extens√£o
                try {
                    chrome.runtime.sendMessage('test', response => {
                        if (chrome.runtime.lastError) {
                            log('‚ö†Ô∏è Extens√£o n√£o detectada - verifique a instala√ß√£o');
                            document.getElementById('install-status').textContent = 'N√£o Detectada';
                            document.getElementById('install-status').className = 'status error';
                        } else {
                            log('‚úÖ Extens√£o detectada e funcionando');
                            document.getElementById('install-status').textContent = 'Funcionando';
                            document.getElementById('install-status').className = 'status success';
                        }
                    });
                } catch (error) {
                    log('‚ùå Erro ao verificar extens√£o: ' + error.message);
                    document.getElementById('install-status').textContent = 'Erro';
                    document.getElementById('install-status').className = 'status error';
                }
            } else {
                log('‚ùå Chrome API n√£o dispon√≠vel');
                document.getElementById('install-status').textContent = 'API Indispon√≠vel';
                document.getElementById('install-status').className = 'status error';
            }
        }

        function testLinkedIn() {
            log('Testando funcionalidade no LinkedIn...');
            
            // Verificar se estamos no LinkedIn
            if (window.location.hostname.includes('linkedin.com')) {
                log('‚úÖ P√°gina do LinkedIn detectada');
                document.getElementById('func-status').textContent = 'Funcionando';
                document.getElementById('func-status').className = 'status success';
                
                // Verificar se a extens√£o est√° ativa
                setTimeout(() => {
                    const overlay = document.querySelector('.linkedin-automation-overlay');
                    if (overlay) {
                        log('‚úÖ Overlay da extens√£o detectado');
                    } else {
                        log('‚ö†Ô∏è Overlay n√£o detectado - verifique se a extens√£o est√° ativa');
                    }
                }, 2000);
            } else {
                log('‚ö†Ô∏è Esta p√°gina n√£o √© o LinkedIn');
                document.getElementById('func-status').textContent = 'Ir para LinkedIn';
                document.getElementById('func-status').className = 'status warning';
                
                // Abrir LinkedIn em nova aba
                window.open('https://www.linkedin.com', '_blank');
            }
        }

        // Inicializar testes
        window.onload = function() {
            log('Iniciando testes da extens√£o LinkedIn Automation Pro...');
            checkFiles();
            
            // Verificar extens√£o automaticamente ap√≥s 2 segundos
            setTimeout(checkExtension, 2000);
        };
    </script>
</body>
</html>
